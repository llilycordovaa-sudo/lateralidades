<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß TEST SIMPLE - DEBUGGING</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background: #2c3e50; 
            color: white; 
        }
        .container { 
            max-width: 900px; 
            margin: 0 auto; 
        }
        .panel { 
            background: rgba(255,255,255,0.1); 
            padding: 20px; 
            margin: 15px 0; 
            border-radius: 10px; 
        }
        .console-output { 
            background: #000; 
            color: #0f0; 
            padding: 15px; 
            font-family: monospace; 
            font-size: 12px; 
            border-radius: 5px; 
            max-height: 500px; 
            overflow-y: auto; 
            white-space: pre-wrap;
        }
        button { 
            background: #e74c3c; 
            color: white; 
            border: none; 
            padding: 15px 30px; 
            border-radius: 5px; 
            margin: 10px; 
            cursor: pointer; 
            font-size: 16px; 
            font-weight: bold;
        }
        button:hover { 
            background: #c0392b; 
        }
        .success { background: #27ae60; }
        .success:hover { background: #229954; }
        h1 { text-align: center; margin-bottom: 30px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß DEBUG SIMPLE - VERIFICACI√ìN DE CARGA</h1>
        
        <div class="panel">
            <h3>üéØ Control Manual</h3>
            <button onclick="verificarCarga()">üîç VERIFICAR CARGA</button>
            <button onclick="verificarFunciones()" class="success">‚öôÔ∏è VERIFICAR FUNCIONES</button>
            <button onclick="testRapido()">üöÄ TEST R√ÅPIDO</button>
            <button onclick="limpiarConsola()">üßπ LIMPIAR</button>
        </div>
        
        <div class="panel">
            <h3>üìä Salida de Console</h3>
            <div id="console-output" class="console-output">Esperando comandos...</div>
        </div>
        
        <!-- √Årea de prueba m√≠nima -->
        <div id="fase-contenido" style="display: none;"></div>
    </div>

    <script>
        // Capturar console.log
        let originalLog = console.log;
        let logOutput = '';
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            logOutput += args.join(' ') + '\n';
            updateConsoleOutput();
        };
        
        function updateConsoleOutput() {
            document.getElementById('console-output').textContent = logOutput;
            document.getElementById('console-output').scrollTop = document.getElementById('console-output').scrollHeight;
        }
        
        function limpiarConsola() {
            logOutput = '';
            updateConsoleOutput();
            console.log('üßπ Consola limpiada');
        }
        
        function verificarCarga() {
            console.log('üîç === VERIFICANDO CARGA DEL ARCHIVO ===');
            
            // Verificar si el script se est√° cargando
            const scripts = document.querySelectorAll('script[src*="actividades-interactivas"]');
            console.log(`üìÑ Scripts encontrados: ${scripts.length}`);
            
            scripts.forEach((script, index) => {
                console.log(`   Script ${index + 1}: ${script.src}`);
                console.log(`   Estado: ${script.readyState || 'cargando'}`);
            });
            
            console.log('‚úÖ Verificaci√≥n de carga completada');
        }
        
        function verificarFunciones() {
            console.log('‚öôÔ∏è === VERIFICANDO FUNCIONES ===');
            
            const funcionesEsperadas = [
                'ActividadState',
                'MeditacionState', 
                'ACTIVIDADES_CONFIG',
                'iniciarActividadInteractiva',
                'mostrarActividad',
                'siguienteFaseActividad',
                'mostrarFaseActividad',
                'activarHerramientaMancha',
                'limpiarManchaPersonal',
                'guardarManchaPersonal',
                'inicializarMiniSimulador'
            ];
            
            let disponibles = 0;
            let total = funcionesEsperadas.length;
            
            funcionesEsperadas.forEach(nombre => {
                if (window[nombre]) {
                    console.log(`‚úÖ ${nombre}: ${typeof window[nombre]} - DISPONIBLE`);
                    disponibles++;
                } else {
                    console.log(`‚ùå ${nombre}: NO DISPONIBLE`);
                }
            });
            
            console.log(`üìä RESULTADO: ${disponibles}/${total} funciones disponibles`);
            
            if (disponibles === total) {
                console.log('üéâ ¬°TODAS LAS FUNCIONES EST√ÅN DISPONIBLES!');
            } else {
                console.log('‚ö†Ô∏è Faltan funciones por cargar');
            }
        }
        
        function testRapido() {
            console.log('üöÄ === TEST R√ÅPIDO ===');
            
            try {
                // Test 1: Verificar ActividadState
                if (window.ActividadState) {
                    console.log('‚úÖ ActividadState disponible');
                    console.log(`   Estado actual: ${window.ActividadState.actividadActual}`);
                } else {
                    console.log('‚ùå ActividadState NO disponible');
                }
                
                // Test 2: Verificar ACTIVIDADES_CONFIG
                if (window.ACTIVIDADES_CONFIG) {
                    const actividades = Object.keys(window.ACTIVIDADES_CONFIG);
                    console.log(`‚úÖ ACTIVIDADES_CONFIG disponible con ${actividades.length} actividades`);
                    console.log(`   Actividades: ${actividades.join(', ')}`);
                } else {
                    console.log('‚ùå ACTIVIDADES_CONFIG NO disponible');
                }
                
                // Test 3: Verificar mostrarActividad
                if (window.mostrarActividad) {
                    console.log('‚úÖ mostrarActividad disponible - probando...');
                    // NO ejecutar, solo verificar que existe
                    console.log('   Funci√≥n lista para usar');
                } else {
                    console.log('‚ùå mostrarActividad NO disponible');
                }
                
                console.log('üéâ Test r√°pido completado');
                
            } catch (error) {
                console.log(`üí• Error en test r√°pido: ${error.message}`);
            }
        }
        
        // Capturar errores globales
        window.addEventListener('error', function(e) {
            console.log(`üí• ERROR GLOBAL: ${e.message}`);
            console.log(`   Archivo: ${e.filename}`);
            console.log(`   L√≠nea: ${e.lineno}`);
        });
        
        // Auto-inicializar
        window.addEventListener('load', function() {
            console.log('üöÄ P√°gina cargada, iniciando verificaci√≥n autom√°tica...');
            setTimeout(() => {
                verificarCarga();
                setTimeout(() => {
                    verificarFunciones();
                }, 1000);
            }, 500);
        });
    </script>
    
    <!-- Cargar el archivo DESPU√âS de que todo est√© listo -->
    <script src="js/actividades-interactivas.js"></script>
</body>
</html>