<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DiagnÃ³stico Laboratorio</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8">ğŸ”§ DiagnÃ³stico del Laboratorio</h1>
        
        <!-- Container del laboratorio -->
        <div id="lab-content-container" class="bg-white rounded-xl shadow-lg p-8 min-h-96 mb-8">
            <!-- Se llenarÃ¡ dinÃ¡micamente -->
        </div>
        
        <!-- Panel de diagnÃ³stico -->
        <div class="bg-blue-50 rounded-xl p-6">
            <h2 class="text-xl font-bold mb-4">ğŸ“Š Estado del Sistema</h2>
            <div id="debug-info" class="space-y-2 text-sm font-mono">
                <!-- Se llenarÃ¡ con informaciÃ³n de debug -->
            </div>
            
            <div class="mt-6 space-x-4">
                <button onclick="runDiagnostic()" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-bold">
                    ğŸ” Ejecutar DiagnÃ³stico
                </button>
                
                <button onclick="testLaboratorio()" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-bold">
                    ğŸ§ª Probar Laboratorio
                </button>
                
                <button onclick="testActividad()" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg font-bold">
                    ğŸ¯ Probar Actividad
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts en el mismo orden que el HTML principal -->
    <script src="js/modelo-pedagogico.js"></script>
    <script src="js/guia-didactica-fixed.js"></script>
    <script src="js/resources.js"></script>
    <script src="js/main-clean.js"></script>
    <script src="js/laboratorio-original.js"></script>
    <script src="js/simulador-mancha-avanzado.js"></script>
    <script src="js/sistema-pinceles-avanzado.js"></script>
    <script src="js/ui-pinceles-avanzada.js"></script>
    <script src="js/actividades-interactivas.js"></script>

    <script>
        function addLog(message, type = 'info') {
            const debugInfo = document.getElementById('debug-info');
            const div = document.createElement('div');
            const colors = {
                info: 'text-blue-600',
                success: 'text-green-600',
                error: 'text-red-600',
                warning: 'text-yellow-600'
            };
            div.className = colors[type] || colors.info;
            div.textContent = message;
            debugInfo.appendChild(div);
            debugInfo.scrollTop = debugInfo.scrollHeight;
        }

        function runDiagnostic() {
            const debugInfo = document.getElementById('debug-info');
            debugInfo.innerHTML = '';
            
            addLog('ğŸ” Iniciando diagnÃ³stico del sistema...', 'info');
            
            // Verificar container
            const container = document.getElementById('lab-content-container');
            addLog(`ğŸ“¦ Container lab-content-container: ${container ? 'ENCONTRADO' : 'FALTANTE'}`, container ? 'success' : 'error');
            
            // Verificar funciones principales
            addLog(`ğŸ”§ initializeLaboratorioCreativo: ${typeof window.initializeLaboratorioCreativo}`, 
                typeof window.initializeLaboratorioCreativo === 'function' ? 'success' : 'error');
            
            addLog(`ğŸ¨ iniciarActividadInteractiva: ${typeof window.iniciarActividadInteractiva}`, 
                typeof window.iniciarActividadInteractiva === 'function' ? 'success' : 'error');
            
            addLog(`ğŸ“š ACTIVIDADES_CONFIG: ${typeof window.ACTIVIDADES_CONFIG}`, 
                typeof window.ACTIVIDADES_CONFIG === 'object' ? 'success' : 'error');
            
            addLog(`ğŸ­ ActividadState: ${typeof window.ActividadState}`, 
                typeof window.ActividadState === 'object' ? 'success' : 'error');
            
            // Verificar clases
            addLog(`ğŸ—ï¸ LaboratorioCreativoOriginal: ${typeof window.LaboratorioCreativoOriginal}`, 
                typeof window.LaboratorioCreativoOriginal === 'function' ? 'success' : 'warning');
            
            addLog(`ğŸ–Œï¸ SistemaAvanzadoPinceles: ${typeof window.SistemaAvanzadoPinceles}`, 
                typeof window.SistemaAvanzadoPinceles === 'function' ? 'success' : 'warning');
            
            addLog(`ğŸ¨ UIAvanzadaPinceles: ${typeof window.UIAvanzadaPinceles}`, 
                typeof window.UIAvanzadaPinceles === 'function' ? 'success' : 'warning');
            
            // Verificar actividades disponibles
            if (window.ACTIVIDADES_CONFIG) {
                const actividades = Object.keys(window.ACTIVIDADES_CONFIG);
                addLog(`ğŸ“‹ Actividades disponibles: ${actividades.join(', ')}`, 'success');
            }
            
            addLog('âœ… DiagnÃ³stico completado', 'success');
        }

        function testLaboratorio() {
            addLog('ğŸ§ª Probando inicializaciÃ³n del laboratorio...', 'info');
            
            try {
                if (typeof window.initializeLaboratorioCreativo === 'function') {
                    window.initializeLaboratorioCreativo();
                    addLog('âœ… Laboratorio inicializado exitosamente', 'success');
                } else {
                    addLog('âŒ initializeLaboratorioCreativo no disponible', 'error');
                }
            } catch (error) {
                addLog(`âŒ Error inicializando laboratorio: ${error.message}`, 'error');
                console.error('Error completo:', error);
            }
        }

        function testActividad() {
            addLog('ğŸ¯ Probando inicializaciÃ³n de actividad...', 'info');
            
            try {
                if (typeof window.iniciarActividadInteractiva === 'function') {
                    window.iniciarActividadInteractiva('actividad1');
                    addLog('âœ… Actividad iniciada exitosamente', 'success');
                } else {
                    addLog('âŒ iniciarActividadInteractiva no disponible', 'error');
                }
            } catch (error) {
                addLog(`âŒ Error iniciando actividad: ${error.message}`, 'error');
                console.error('Error completo:', error);
            }
        }

        // Ejecutar diagnÃ³stico automÃ¡tico al cargar
        window.addEventListener('load', () => {
            setTimeout(() => {
                addLog('ğŸš€ PÃ¡gina cargada, ejecutando diagnÃ³stico automÃ¡tico...', 'info');
                runDiagnostic();
            }, 1000);
        });
    </script>
</body>
</html>